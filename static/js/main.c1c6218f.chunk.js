(this["webpackJsonpwebmidi-logger"]=this["webpackJsonpwebmidi-logger"]||[]).push([[0],{21:function(e,t,n){},22:function(e,t,n){},28:function(e,t,n){"use strict";n.r(t);var s=n(0),c=n(2),i=n.n(c),a=n(12),d=n.n(a),o=n(3),l=n(4),r=n(6),m=n(5),h=(n(21),n(10)),u=(n(22),n(8)),j=function(e){Object(r.a)(n,e);var t=Object(m.a)(n);function n(e){var s;return Object(o.a)(this,n),(s=t.call(this,e))._onMIDISuccess=function(e){console.log("MIDI Access",e),console.log("".concat(e.inputs.size," input devices"));var t,n=[],c=Object(h.a)(e.inputs.values());try{for(c.s();!(t=c.n()).done;){var i=t.value;console.log(" - ".concat(i.name)),i.onmidimessage=s._handleMIDIMessage,n.push(i)}}catch(a){c.e(a)}finally{c.f()}s.setState({midiInputs:n})},s._onMIDIFailure=function(e){return console.error("Cannot access MIDI devices.",e)},s._handleMIDIMessage=function(e){var t,n=e.target.name,c=e.data[0],i=c%16,a=c-i,d=(null===(t=s.commands.get(a))||void 0===t?void 0:t.name)||"unknownCommand",o=e.timeStamp,l=e.data[1],r=e.data.length>2?e.data[2]:0,m={message:e,id:s.state.messages.length,device:n,channel:i,command:a,commandName:d,time:o,pitch:l,velocity:r},h=new Set(s.state.devices).add(n),u=new Set(s.state.channels).add(i),j=new Set(s.state.commands).add(a);s.setState({messages:s.state.messages.concat(m),devices:h,channels:u,commands:j})},s.toggleDevice=function(e){var t=s.state.hiddenDevices,n=e.target.value,c=new Set(t);t.has(n)?c.delete(n):c.add(n),s.setState({hiddenDevices:c})},s.toggleChannel=function(e){var t=s.state.hiddenChannels,n=+e.target.value,c=new Set(t);t.has(n)?c.delete(n):c.add(n),s.setState({hiddenChannels:c})},s.toggleCommand=function(e){var t=s.state.hiddenCommands,n=+e.target.value,c=new Set(t);t.has(n)?c.delete(n):c.add(n),s.setState({hiddenCommands:c})},s.state={midiInputs:[],messages:[],devices:new Set,channels:new Set,commands:new Set,hiddenDevices:new Set,hiddenChannels:new Set,hiddenCommands:new Set},s.commands=u.Midi.MIDI_COMMANDS,s}return Object(l.a)(n,[{key:"componentDidMount",value:function(){navigator.requestMIDIAccess?navigator.requestMIDIAccess().then(this._onMIDISuccess,this._onMIDIFailure):(console.error("WebMIDI is not supported in this browser."),alert("You browser does not support WebMIDI"))}},{key:"render",value:function(){var e,t=this,n=this.state,c=n.messages,i=n.midiInputs,a=n.devices,d=n.channels,o=n.commands,l=n.hiddenDevices,r=n.hiddenChannels,m=n.hiddenCommands,j=[],v=Object(h.a)(i);try{var b=function(){var t=e.value;j.push(Object(s.jsx)("div",{className:"midiInput",title:"Click to log the object to the browser console",onClick:function(){return console.log(t)},children:t.name},t.name))};for(v.s();!(e=v.n()).done;)b()}catch(f){v.e(f)}finally{v.f()}var g=c.filter((function(e){var t=e.device,n=e.channel,s=e.command;return!(l.has(t)||r.has(n)||m.has(s))})),O=g.reverse().slice(0,50).map((function(e){return Object(s.jsxs)("div",{className:"message ".concat(e.commandName),title:"Click to log the object to the browser console",onClick:function(){return console.log(e)},children:[Object(s.jsx)("div",{className:"id",title:"Number",children:e.id}),Object(s.jsx)("div",{className:"time",title:"Time: ".concat(e.time),children:Math.floor(e.time)}),Object(s.jsx)("div",{className:"device",title:"Device: ".concat(e.device),children:e.device.slice(0,30)}),Object(s.jsx)("div",{className:"channel",title:"Channel",children:e.channel}),Object(s.jsxs)("div",{className:"command",title:"Command",children:[e.command," ",e.commandName]}),[128,144].includes(e.command)&&Object(s.jsxs)("div",{className:"pitch",title:"Pitch",children:[e.pitch," ",u.Midi.getMidiNoteByNr(e.pitch).label]}),[144].includes(e.command)&&Object(s.jsx)("div",{className:"velocity",title:"Velocity",children:e.velocity})]},e.id)}));return Object(s.jsxs)("div",{className:"Logger",children:[Object(s.jsxs)("div",{children:[Object(s.jsxs)("h2",{children:[i.length," MIDI Input",i.length>1&&"s"]}),Object(s.jsx)("div",{children:j})]}),Object(s.jsxs)("div",{children:[Object(s.jsxs)("h2",{children:[c.length," messages, ",g.length," with current filter, showing newest on top, limited to ",50]}),Object(s.jsxs)("div",{className:"filterOptions",children:["Devices",Object(s.jsx)("div",{children:Array.from(a).sort().map((function(e){return Object(s.jsx)("button",{value:e,onClick:t.toggleDevice,className:l.has(e)?"hidden":"shown",title:"Click to hide / show",children:e},e)}))}),"Channels",Object(s.jsx)("div",{children:Array.from(d).sort((function(e,t){return e-t})).map((function(e){return Object(s.jsxs)("button",{value:e,onClick:t.toggleChannel,className:r.has(e)?"hidden":"shown",title:"Click to hide / show",children:["Channel ",e]},e)}))}),"Commands",Object(s.jsx)("div",{children:Array.from(o).sort((function(e,t){return e-t})).map((function(e){var n,c=m.has(e)?"hidden":"shown",i=(null===(n=t.commands.get(e))||void 0===n?void 0:n.name)||"unknownCommand";return c="".concat(c," ").concat(i),Object(s.jsxs)("button",{value:e,onClick:t.toggleCommand,className:c,title:"Click to hide / show",children:[e," (",t.commands.get(e).name||"unknownCommand",")"]},e)}))})]}),Object(s.jsxs)("div",{className:"message",children:[Object(s.jsx)("div",{className:"id",children:"#"}),Object(s.jsx)("div",{className:"time",children:"Time (ms)"}),Object(s.jsx)("div",{className:"device",children:"Input"}),Object(s.jsx)("div",{className:"channel",children:"Channel"}),Object(s.jsx)("div",{className:"command",children:"Command"}),Object(s.jsx)("div",{className:"pitch",children:"Note"}),Object(s.jsx)("div",{className:"velocity",children:"Velocity"})]}),Object(s.jsx)("div",{className:"messagesContainer",children:O})]})]})}}]),n}(c.Component),v=n(13),b=n(14),g=function(e){Object(r.a)(n,e);var t=Object(m.a)(n);function n(){return Object(o.a)(this,n),t.apply(this,arguments)}return Object(l.a)(n,[{key:"render",value:function(){return Object(s.jsxs)("div",{className:"App bright",children:[Object(s.jsx)(j,{}),Object(s.jsx)("div",{className:"githubLink",children:Object(s.jsxs)("a",{href:"https://github.com/fheyen/webmidi-logger",children:[Object(s.jsx)(v.a,{icon:b.a}),"\xa0 https://github.com/fheyen/webmidi-logger"]})})]})}}]),n}(c.Component);d.a.render(Object(s.jsx)(i.a.StrictMode,{children:Object(s.jsx)(g,{})}),document.getElementById("root"))}},[[28,1,2]]]);
//# sourceMappingURL=main.c1c6218f.chunk.js.map